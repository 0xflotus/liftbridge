syntax = "proto3";
package proto;


message RaftLog {
    enum Op {
        CREATE_STREAM = 0;
    }
    Op              op              = 1;
    CreateStreamOp  createStreamOp  = 2;
}

message CreateStreamOp {
    Stream stream = 1;
}

message Stream {
    string          subject           = 1;
    string          name              = 2;
    string          consumerGroup     = 3;
    int32           replicationFactor = 4;
    repeated string replicas          = 5;
    string          leader            = 6;
    repeated string isr               = 7;
}

// RaftJoinRequest is a request to join a Raft group.
message RaftJoinRequest {
    string nodeID   = 1; // ID of the joining node.
    string nodeAddr = 2; // Address of the joining node.
}

// RaftJoinResponse is a response to a RaftJoinRequest.
message RaftJoinResponse {
    string error = 1; // Error string, omitted if no error. 
}

message MetadataSnapshot {
    repeated Stream streams = 1;
}

message ReplicationRequest {
    string replicaID     = 1;
    int64  highWatermark = 2;
    string inbox         = 3;
}
